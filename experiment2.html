<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>课程2：机械臂垃圾分类控制系统实现</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="media/images/校徽.png">
</head>
<body>
<div class="meteor-shower">
        <!-- 这里只放流星的 i 标签 -->
        <i></i><i></i><i></i><i></i><i></i>
        <i></i><i></i><i></i><i></i><i></i>
        <i></i><i></i><i></i><i></i><i></i>
        <i></i><i></i><i></i><i></i><i></i>
        <i></i><i></i><i></i>
    </div>
    <!-- 苹果风格毛玻璃导航栏 -->
    <nav class="nav-bar airglass">
        <div class="nav-content container">
            <a href="index.html" class="logo">
                <img src="media/images/校徽.png" alt="多媒体实验平台logo" class="logo-img">
                多媒体技术微课在线平台</a>
            <ul class="nav-links">
                <li><a href="index.html">返回首页</a></li>
                <li><a href="experiment1.html">课程1</a></li>
                <li><a href="experiment3.html">课程3</a></li>
                <li><a href="experiment4.html">课程4</a></li>
                <li><a href="#content" class="link">课程内容</a></li>
                <li><a href="#steps" class="link">实践步骤</a></li>
            </ul>
        </div>
    </nav>

    <!-- 苹果风格页头 -->
    <header class="header">
        <h1>课程 2：机械臂创新实践</h1>
        <p>理解myCobot 280机械臂原理 · 视觉识别+大模型交互</p>
    </header>

    <!-- 核心内容区（卡片式布局） -->
    <main class="container">
        <div class="content">
            <!-- 实验内容卡片 -->
            <div class="card">
                <div id="content" class="anchor"></div>
                <h2 class="section-title">一、课程内容</h2>

                <h3 class="sub-title">1. 微课视频</h3>
                <div class="media-container">
                    <h3>微课视频</h3>
                        <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 12px; background-color: #000;">
                            <video
                                controls
                                playsinline
                                preload="metadata"
                                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
                                poster="media/images/机械臂创新实践-封面.jpg"
                            >
                                <!-- 👇 请在下方引号内填入你的腾讯云 COS 视频链接 👇 -->
                                <source src="https://multimedia-1393180726.cos.ap-shanghai.myqcloud.com/video/%E6%9C%BA%E6%A2%B0%E8%87%82%E5%88%9B%E6%96%B0%E5%AE%9E%E8%B7%B5.mp4" type="video/mp4">

                                您的浏览器不支持 HTML5 视频标签。
                            </video>
                        </div>
                </div>
                <h3 class="sub-title">2. 课程目标与内容</h3>
                <ul class="custom-list">
                    <li>理解机械臂的工作原理</li>
                    <li>编程实现对机械臂进行控制，完成分类动作</li>
                    <li>通过语音调用大模型，完成具体的机械臂工作任务</li>
                    <li>扩展任务：构建一个 “语音 → 理解 → 感知 → 动作 → 反馈” 的完整闭环系统</li>
                </ul>

                <h3 class="sub-title">3. 机械臂构成及工作原理</h3>

                <h4 style="font-size: 18px; margin: 20px 0 12px; color: #1d1d1f; font-weight: 500;">3.1 机械臂构成</h4>
                <p class="text-content">
                    myCobot 280 JN (2023) 小象协作机械臂是一款采用铝合金材质的六自由度协作机械臂。
                </p>
                <p class="text-content">主要包含5个子系统：</p>
                <ul class="custom-list">
                    <li>机械结构系统：“骨架”，由基座、连杆、关节和末端执行器。</li>
                    <li>驱动系统：“肌肉”，包括液压、气动或电动三种驱动方式。</li>
                    <li>感知系统：“感官”，传感器来获取内外环境状态信息。</li>
                    <li>控制系统：“大脑”，处理信息、决策并向驱动系统发出指令。</li>
                    <li>交互系统：“人机界面”，如实现人与信息交流与控制。</li>
                </ul>

                <h4 style="font-size: 18px; margin: 20px 0 12px; color: #1d1d1f; font-weight: 500;">3.2 机械臂工作原理</h4>
                <p class="text-content">
                    myCobot 280的工作原理基于对六个关节的协同控制。用户通过图形化myStudio或代码指令，向机械臂的控制系统发送目标位置和姿态信息。控制系统依据运动学算法，实时解算出每个关节需要转动的精确角度。在关节控制中，控制系统直接对六个关节进行独立或协同驱动。通过如send_angle()或send_angles()等指令，指定每个关节的目标角度及运动速度。控制系统直接将指令下发至各一体化关节模组，驱动电机转动，使所有关节以指定速度同步到达目标位置，从而实现机械臂的姿态变化。
                </p>
                <!-- 机械臂实物展示图 -->
                <div class="media-container">
                    <img src="media/images/mycobot.png" alt="myCobot 280 机械臂" width="800">
                </div>


            </div>

            <!-- 实验步骤卡片 -->
            <div class="card">
                <div id="steps" class="anchor"></div>
                <h2 class="section-title">二、基础实验</h2>
                <p class="text-content">运行样例：</p>
                <div class="code-block">
                  在样例目录中，运行 sudo python3 agent.py。稍等几秒后，命令行界面出现提示符 < USER >:
                </div>

                <h3 class="sub-title">1. 移动蓝色方块</h3>
                <p class="text-content">执行指令：</p>
                <div class="code-block">
grab blue cube and move to -80,200
                </div>
                <p class="text-content">
                    下图是开发板终端界面，指令为抓取蓝色方块并移动至坐标 - 80,200，系统调用grab_object和move_to函数执行，视觉识别出蓝色立方体的像素区域为 [522,688,598,842]，其中心像素坐标 (387.2,354.59) 被转换为机械臂物理坐标 [168.5,-18.7]，再通过机械臂运动控制实现蓝色方块的移动。
                </p>
                <div class="media-container">
                    <img src="media/images/mycobot1.png" alt="mycobot1" width="800">
                </div>

                <h3 class="sub-title">2. 移动书本</h3>
                <p class="text-content">执行指令为：</p>
                <div class="code-block">
grab book and move to -80,220
                </div>
                <p class="text-content">
                    通过视觉系统连接大模型，判定哪个方块为目标书本，识别出书本的像素区域为[x1:523, x2:713, y1:586, y2:851]，计算出中心像素坐标(395.52, 344.88)，再通过手眼标定转换为机械臂物理坐标[168.8 -21.2]，最终日志显示 “机械臂已成功抓取书本并将其移动到坐标 (-80,220) 位置，且输出Objects arranged successfully，说明过程完成。
                </p>

                <!-- 实验操作截图 -->
                <div class="media-container">
                    <img src="media/images/mycobot2.png" alt="mycobot2" width="800">
                </div>

            </div>

            <div class="card">
                <h2 class="section-title">三、扩展实验</h2>

                <p class="text-content">
                    本扩展实验基于 Gradio 构建浏览器语音录制界面，
                    实现通过网页完成麦克风录音，并将语音保存为 FLAC 文件。
                    随后，机械臂控制程序将自动读取语音文件，
                    完成语音解析与动作执行，
                    构成一条完整的
                    <strong>“语音 → 指令 → 机械臂动作”</strong>
                    实验链路。
                </p>

                <p class="text-content">
                    该实验用于验证语音输入在真实硬件系统中的可用性，
                    同时为后续语音识别、大模型理解和机械臂协同控制
                    提供基础数据与接口支持。
                </p>

                <p class="text-content">
                    本实验重点包括：
                    <br>1）基于 conda 的 Python 3.10 虚拟环境准备
                    <br>2）使用 Gradio 构建 Web 端语音录制界面
                    <br>3）将录音保存为统一命名的 FLAC 文件
                    <br>4）语音文件驱动机械臂执行动作
                </p>

                <h3 class="sub-title">1. Web 语音录制说明</h3>

                <p class="text-content">
                    启动语音录制程序后，在浏览器中打开对应页面，
                    可以看到 Jetson FLAC 录音界面。
                    用户通过点击录音按钮即可开始录制语音，
                    再次点击则结束录音。
                </p>

                <p class="text-content">
                    录音过程完全在浏览器中完成，
                    无需额外安装插件，
                    适合在本机或局域网内的其他设备上使用。
                </p>

                <p class="text-content">
                    录音完成后系统将自动执行以下操作：
                    <br>• 将语音保存为 <code>current_recording.flac</code>
                    <br>• 在页面中显示录音状态、采样率与时长信息
                    <br>• 提供录音回放功能，用于确认语音内容是否清晰、完整
                </p>

                <div class="media-container">
                    <img src="media/images/mycobot4.png" alt="myCobot4" width="800">
                </div>

                <h3 class="sub-title">2. 生成机械臂可用语音文件</h3>

                <p class="text-content">
                    为便于机械臂程序稳定读取语音文件，
                    本实验采用固定文件名的方式进行数据传递。
                </p>

                <p class="text-content">
                    在录音确认无误后，
                    点击页面底部按钮：
                    <br><strong>“执行指令：复制到 Recording.flac”</strong>
                </p>

                <p class="text-content">
                    系统会自动将最新录音复制并重命名为：
                    <br><code>Recording.flac</code>
                    <br>该文件位于机械臂控制程序的工作目录中，
                    无需人工干预即可被后续程序读取。
                </p>

                <div class="media-container">
                    <img src="media/images/mycobot5.png" alt="myCobot5" width="800">
                </div>

                <h3 class="sub-title">3. 启动机械臂程序</h3>

                <p class="text-content">
                    机械臂控制程序依赖系统原生 Python 环境，
                    因此在启动前需要确保已经退出 conda 虚拟环境。
                </p>

                <p class="text-content">
                    ⚠ 注意：若在虚拟环境中运行，
                    可能会出现库缺失或硬件接口无法访问的问题。
                </p>

                <div class="code-block">
            # 退出虚拟环境
            conda deactivate

            # 启动机械臂语音控制程序
            python3 agent2.py -v
                </div>

                <p class="text-content">
                    程序启动后，
                    将自动检测当前目录下的 <code>Recording.flac</code> 文件，
                    并对其中的语音内容进行解析，
                    根据识别结果生成对应的机械臂控制指令。
                </p>

                <!-- 此处可插入：机械臂程序终端运行截图 -->
                <!-- <div class="media-container">
                    <img src="media/images/xxx.png" alt="机械臂程序运行">
                </div> -->

                <h3 class="sub-title">4. 语音指令示例</h3>

                <p class="text-content">
                    为提高语音识别与指令解析的准确率，
                    建议在录音时使用结构清晰、语速适中的表达方式，
                    避免含糊或过长的自由描述。
                </p>

                <p class="text-content">
                    示例指令如下：
                    <br><code>移动到 x 等于 0，y 等于 200</code>
                </p>

                <p class="text-content">
                    采用“动作 + 参数”的表达方式，
                    有助于系统准确提取关键控制信息，
                    并减少误识别的可能性。
                </p>

                <h3 class="sub-title">5. 注意事项</h3>

                <p class="text-content">
                    1）浏览器访问地址应使用 <code>localhost:7860</code> 或开发板 IP 地址，
                    而不是 0.0.0.0
                    <br>2）录音前请检查系统 Sound 设置中的输入设备是否选择正确
                    <br>3）录音时观察输入音量条，确保有明显变化
                    <br>4）仅在权限或接口报错时才使用 <code>sudo python3 agent.py</code>
                </p>
            </div>






            </div>
            <!-- 思考题卡片 -->
            <div class="card">
                <h2 class="section-title">三、实验结果演示</h2>
                <div class="media-container">
                        <!-- 外层保持原有的 16:9 响应式容器，增加了黑色背景防止加载时白屏 -->
                        <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 12px; background-color: #000;">
                            <video
                                controls
                                playsinline
                                preload="metadata"
                                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
                            >
                                <!-- 👇 请在下方引号内填入你的腾讯云 COS 视频链接 👇 -->
                                <source src="https://multimedia-1393180726.cos.ap-shanghai.myqcloud.com/video/%E5%AE%9E%E9%AA%8C%E6%BC%94%E7%A4%BA.mp4" type="video/mp4">

                                您的浏览器不支持 HTML5 视频标签。
                            </video>
                        </div>
                    </div>
                <div style="text-align: center; margin-top: 40px;">
                    <a href="experiment1.html" class="btn btn-outline">返回课程1</a>
                    <a href="experiment3.html" class="btn" style="margin-left: 15px;">进入课程3</a>
                </div>
            </div>
        </div>
    </main>
<!-- 页脚：3D极光玻璃风格 -->
    <footer class="footer-3d">
        <!-- 1. 背景层：3D网格与INS风光晕（营造空间感） -->
        <div class="footer-decor">
            <div class="blob blob-1"></div>
            <div class="blob blob-2"></div>
            <div class="grid-lines"></div>
        </div>

        <!-- 2. 内容层：悬浮毛玻璃舱 -->
        <div class="container footer-glass airglass">
            <div class="footer-inner">
                <!-- 导航链接 -->
                <div class="footer-links">
                    <a href="index.html">首页</a>
                    <a href="experiment1.html">课程1</a>
                    <a href="experiment2.html">课程2</a>
                    <a href="experiment3.html">课程3</a>
                    <a href="experiment4.html">课程4</a>
                    <a href="https://www.elephantrobotics.com/mycobot-280/" target="_blank">myCobot 280 官方文档</a>
                    <a href="https://docs.elephantrobotics.com/docs/zh-CN/2.0/myCobot/280/jn/python_api/" target="_blank">Python API 参考</a>
                </div>

                <!-- 版权信息 -->
                <div class="footer-bottom">
                    <p class="copyright">
                        © 2025 多媒体技术微课在线平台 · 版权所有
                    </p>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>
